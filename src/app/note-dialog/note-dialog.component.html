<div class="overlay" role="dialog" aria-modal="true">
  <div class="dialog-container">
    <h3 class="dialog-title">Neue Notiz</h3>

    <label class="field-label" for="note-text">Notiz</label>
    <textarea
      id="note-text"
      class="note-input"
      rows="5"
      [value]="noteText()"
      (input)="noteText.set($any($event.target).value)"
      placeholder="Schreibe deine Notiz..."
    ></textarea>

    <div class="file-section">
      <label class="field-label">Dateianhänge</label>

      <div class="upload-container"
           (click)="fileInput.click()"
           (dragover)="onDragOver($event)"
           (dragleave)="onDragLeave($event)"
           (drop)="onDrop($event)">
        <svg class="upload-icon" width="30" height="30" viewBox="0 0 30 30" fill="none">
          <path d="M21.847 11.2638C21.8563 11.2638 21.8656 11.2638 21.875 11.2638C24.9816 11.2638 27.5 13.7868 27.5 16.8991C27.5 19.7998 25.3125 22.1885 22.5 22.5M21.847 11.2638C21.8655 11.0576 21.875 10.8487 21.875 10.6376C21.875 6.83369 18.797 3.75 15 3.75C11.404 3.75 8.45291 6.51584 8.15053 10.0399M21.847 11.2638C21.7191 12.6845 21.1607 13.9808 20.3035 15.0206M8.15053 10.0399C4.97998 10.3422 2.5 13.0174 2.5 16.2729C2.5 19.3021 4.6472 21.829 7.5 22.4091M8.15053 10.0399C8.34783 10.0211 8.54779 10.0115 8.75 10.0115C10.1573 10.0115 11.4559 10.4774 12.5006 11.2638" stroke="#629D37" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M15 16.25V26.25M15 16.25C14.1247 16.25 12.4894 18.7429 11.875 19.375M15 16.25C15.8753 16.25 17.5106 18.7429 18.125 19.375" stroke="#629D37" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <div class="upload-text">
          Ziehen & Ablegen<br>oder klicken, um eine Datei auszuwählen
        </div>
      </div>

      <input #fileInput type="file" multiple (change)="onFileChange($event)" style="display: none;" />

      <ul class="file-list" *ngIf="selectedFiles().length > 0">
        <li class="file-item" *ngFor="let file of selectedFiles(); index as i">
          <span class="file-name">{{ file.name }}</span>
          <button class="remove-file-btn" type="button" (click)="removeFile(i)">Entfernen</button>
        </li>
      </ul>
    </div>

    <div class="actions">
      <button type="button" class="btn btn-secondary" (click)="onCancel()">Abbrechen</button>
      <button type="button" class="btn btn-primary" [disabled]="!noteText().trim()" (click)="onSave()">Speichern</button>
    </div>
  </div>
</div>
